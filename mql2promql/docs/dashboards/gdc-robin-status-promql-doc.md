# MQL to PromQL Conversion Guide - GDC Robin Status 

This document explains the proposed translations to Prometheus Query Language (PromQL) of the `dashboards/gdc-daily-report.json` dashboard and the Testing Results

## `dashboards/gdc-robin-status.json`

| Group | Input Query Title | Input Query Type | Source Query | LLM Reasoning | LLM Output Query Type | LLM Output PromQL Query | Comments |
| --- | --- | --- | --- | --- | --- | --- | --- |
| N/A | Robin Node State - ONLINE & READY | MQL | `metric.type="prometheus.googleapis.com/robin_node_state/gauge" resource.type="prometheus_target" metric.label."node_state"="ONLINE" metric.label."node_status"="Ready"` | The MQL `timeSeriesFilter` is converted to a PromQL query. The metric name is converted, and the filters are applied as label matchers. The aggregation `REDUCE_MEAN` with `groupByFields` is converted to `avg by (node_name)`. | PromQL | `avg by (node_name) (prometheus_googleapis_com:robin_node_state{node_state="ONLINE", node_status="Ready"})` | |
| N/A | Robin Disk State - ONLINE & READY | MQL | `metric.type="prometheus.googleapis.com/robin_disk_status/gauge" resource.type="prometheus_target" metric.label."disk_state"="READY" metric.label."disk_status"="ONLINE"` | Similar to the previous query, the `timeSeriesFilter` is converted to a PromQL query with label matchers and aggregation. | PromQL | `avg by (node_name) (prometheus_googleapis_com:robin_disk_status{disk_state="READY", disk_status="ONLINE"})` | |
| N/A | Node 1 - UNHEALTHY Services | MQL | `metric.type="prometheus.googleapis.com/robin_service_status/gauge" resource.type="prometheus_target" metric.label."node_name"="cnuc-1" metric.label."service_state"!="UP"` | The `timeSeriesFilter` is converted to a PromQL query with label matchers for the specific node and service state. | PromQL | `avg by (service_state, service_name) (prometheus_googleapis_com:robin_service_status{node_name="cnuc-1", service_state!="UP"})` | |
| N/A | Node 2 - UNHEALTHY Services | MQL | `metric.type="prometheus.googleapis.com/robin_service_status/gauge" resource.type="prometheus_target" metric.label."node_name"="edge-2" metric.label."service_state"!="UP"` | The `timeSeriesFilter` is converted to a PromQL query with label matchers for the specific node and service state. | PromQL | `avg by (service_state, service_name) (prometheus_googleapis_com:robin_service_status{node_name="edge-2", service_state!="UP"})` | |
| N/A | Node 3 - UNHEALTHY Services | MQL | `metric.type="prometheus.googleapis.com/robin_service_status/gauge" resource.type="prometheus_target" metric.label."node_name"="edge-3" metric.label."service_state"!="UP"` | The `timeSeriesFilter` is converted to a PromQL query with label matchers for the specific node and service state. | PromQL | `avg by (service_state, service_name) (prometheus_googleapis_com:robin_service_status{node_name="edge-3", service_state!="UP"})` | |
| N/A | prometheus/robin_service_status/gauge [COUNT] | MQL | `metric.type="prometheus.googleapis.com/robin_service_status/gauge" resource.type="prometheus_target"` | The `timeSeriesFilter` is converted to a PromQL query. The `REDUCE_COUNT` aggregation is converted to `count by (...)`. | PromQL | `count by (service_state, service_name) (prometheus_googleapis_com:robin_service_status)` | |
